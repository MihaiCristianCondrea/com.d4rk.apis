/* --- Scroll --- */
.focus-checklist {
  max-height: 220px;
  overflow: auto;
}

.screenshot-list {
  --screenshot-item-width: clamp(220px, 75vw, 320px);
  display: flex;
  flex-wrap: nowrap;
  align-items: stretch;
  gap: var(--screenshot-inline-gap, var(--app-screenshot-gap));
  padding-block: 0.5rem;
  padding-inline: 0;
  overflow: visible;
  scroll-snap-stop: always;
  direction: ltr;
  touch-action: pan-x;
  min-width: 100%;
  box-sizing: border-box;
}

.screenshot-list:focus-visible {
  outline: 2px solid var(--md-sys-color-primary);
  outline-offset: 4px;
}

@media (min-width: 768px) {
  .screenshot-list {
    --screenshot-item-width: clamp(240px, 45vw, 340px);
  }
}

@media (min-width: 1024px) {
  .screenshot-list {
    --screenshot-item-width: clamp(280px, 34vw, 420px);
  }
}

@media (min-width: 1280px) {
  .screenshot-list {
    --screenshot-item-width: clamp(260px, 32vw, 380px);
  }
}

.screenshot-item {
  background: var(--md-sys-color-surface-container-low);
  border-radius: var(--app-screenshot-radius);
  padding: 1rem;
  display: grid;
  gap: 0.75rem;
  transition: box-shadow 140ms ease, transform 140ms ease;
  border: 1px solid transparent;
  min-width: min(var(--screenshot-item-width), 100%);
  width: min(var(--screenshot-item-width), 100%);
  flex: 0 0 min(var(--screenshot-item-width), 100%);
  scroll-snap-align: start center;
  scroll-snap-stop: always;
}

.screenshot-item.dragging {
  opacity: 0.7;
  transform: scale(0.98);
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.18);
}

.screenshot-item.drag-over {
  border-color: var(--md-sys-color-primary);
}

.screenshot-item.is-active,
.screenshot-item:focus-within {
  border-color: color-mix(in srgb, var(--md-sys-color-primary) 45%, transparent);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.16);
}

.screenshot-item-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.screenshot-item-actions md-icon-button {
  --md-icon-button-container-height: 38px;
  --md-icon-button-container-width: 38px;
  --md-icon-button-icon-size: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.screenshot-item-actions-end {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.screenshot-drag-handle {
  cursor: grab;
  color: var(--app-secondary-text-color);
}

.screenshot-drag-handle:focus-visible {
  outline: 2px solid var(--md-sys-color-primary);
  outline-offset: 2px;
}

.screenshot-thumbnail {
  width: 100%;
  aspect-ratio: 9 / 16;
  border-radius: var(--app-screenshot-radius);
  background: var(--md-sys-color-surface-container-highest);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  border: 1px solid var(--app-border-color);
}

.screenshot-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}

.screenshot-thumbnail[data-state='loading'] img {
  opacity: 0.4;
}

.screenshot-thumbnail[data-state='empty']::after,
.screenshot-thumbnail[data-state='error']::after,
.screenshot-thumbnail[data-state='loading']::after {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: 0.7rem;
  text-align: center;
  padding: 0.25rem;
}

.screenshot-thumbnail[data-state='empty']::after {
  content: 'No image';
  color: var(--app-secondary-text-color);
}

.screenshot-thumbnail[data-state='loading']::after {
  content: 'Loadingâ€¦';
  color: var(--app-secondary-text-color);
}

.screenshot-thumbnail[data-state='error']::after {
  content: 'Load error';
  color: var(--md-sys-color-error);
}

.screenshot-info {
  display: grid;
  gap: 0.5rem;
}

.screenshot-meta {
  font-size: 0.75rem;
  color: var(--app-secondary-text-color);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.screenshot-meta[data-state='error'] {
  color: var(--md-sys-color-error);
}

.screenshot-meta kbd {
  font-size: 0.7rem;
  padding: 0.1rem 0.35rem;
  border-radius: 4px;
  background: var(--md-sys-color-surface-container);
  border: 1px solid var(--app-border-color);
}

.screenshot-carousel { 
  position: relative;
  overflow: visible;
}

.builder-screenshots,
.builder-screenshots .screenshot-carousel,
.builder-screenshots .screenshot-carousel__viewport,
.builder-screenshots .screenshot-list,
.builder-screenshots .screenshot-carousel__indicator-row {
  width: 100%;
  max-width: min(720px, 100%);
  margin-inline: auto;
}

.screenshot-carousel__viewport {
  position: relative;
  overflow-x: auto;
  overflow-y: hidden;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  border-radius: 18px;
  padding-inline: var(--app-screenshot-padding);
  scroll-snap-type: x mandatory;
  scroll-padding-inline: var(--app-screenshot-padding);
  overscroll-behavior-x: contain;
  scrollbar-gutter: stable both-edges;
  -webkit-overflow-scrolling: touch;
}

.screenshot-carousel__viewport::before,
.screenshot-carousel__viewport::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 24px;
  pointer-events: none;
  z-index: 2;
  transition: opacity 180ms ease;
}

.screenshot-carousel__viewport::before {
  left: 0;
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--md-sys-color-surface-container) 75%, transparent),
    transparent
  );
}

.screenshot-carousel__viewport::after {
  right: 0;
  background: linear-gradient(
    270deg,
    color-mix(in srgb, var(--md-sys-color-surface-container) 75%, transparent),
    transparent
  );
}

.screenshot-carousel[data-edge-start='true'] .screenshot-carousel__viewport::before,
.screenshot-carousel[data-edge-end='true'] .screenshot-carousel__viewport::after {
  opacity: 0;
}

.screenshot-carousel[data-has-nav='false'] .screenshot-carousel__viewport::before,
.screenshot-carousel[data-has-nav='false'] .screenshot-carousel__viewport::after {
  opacity: 0;
}

.screenshot-carousel__nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 4;
  width: clamp(32px, 8vw, 46px);
  height: clamp(32px, 8vw, 46px);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--app-border-color);
  border-radius: 50%;
  background: color-mix(
    in srgb,
    var(--md-sys-color-surface-container-highest) 92%,
    var(--md-sys-color-surface-container) 8%
  );
  color: var(--md-sys-color-on-surface);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18);
  cursor: pointer;
  opacity: 1;
  transition: opacity 180ms ease, transform 160ms ease, box-shadow 160ms ease;
}

.screenshot-carousel__nav span {
  font-size: clamp(20px, 2vw, 26px);
}

.screenshot-carousel__nav--prev {
  left: clamp(0.25rem, 1vw, 0.75rem);
}

.screenshot-carousel__nav--next {
  right: clamp(0.25rem, 1vw, 0.75rem);
}

.screenshot-carousel__nav:focus-visible {
  outline: 2px solid var(--md-sys-color-primary);
  outline-offset: 2px;
}

.screenshot-carousel__nav:disabled {
  cursor: default;
  opacity: 0.35;
  box-shadow: none;
}

.screenshot-carousel[data-count='1'] .screenshot-carousel__nav {
  opacity: 0.35;
  pointer-events: none;
}

@media (hover: none) {
  .screenshot-carousel__nav {
    opacity: 1;
  }
}

.screenshot-carousel[data-edge-start='true'] .screenshot-carousel__nav--prev,
.screenshot-carousel[data-edge-end='true'] .screenshot-carousel__nav--next {
  opacity: 0.2;
  pointer-events: none;
}

.screenshot-carousel__indicator-row {
  position: relative;
  width: 100%;
  display: flex;
  justify-content: center;
}

.screenshot-carousel__indicators {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.35rem;
  padding: 0.35rem 0;
}

.screenshot-carousel__indicator {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--app-border-color) 50%, transparent);
  background: color-mix(in srgb, var(--md-sys-color-on-surface) 15%, transparent);
  opacity: 0.8;
  cursor: pointer;
  transition: width 140ms ease, opacity 140ms ease, background 140ms ease;
}

.screenshot-carousel__indicator[data-active='true'] {
  width: 24px;
  opacity: 1;
  background: color-mix(in srgb, var(--md-sys-color-primary) 40%, transparent);
  border-color: color-mix(in srgb, var(--md-sys-color-primary) 50%, transparent);
}

.screenshot-carousel__indicator:focus-visible {
  outline: 2px solid var(--md-sys-color-primary);
  outline-offset: 2px;
}

.screenshot-carousel__status {
  font-size: 0.8rem;
  line-height: 1;
  color: var(--app-secondary-text-color);
  text-align: center;
}

.screenshot-carousel__hint {
  position: absolute;
  bottom: clamp(0.5rem, 2vw, 1rem);
  left: 50%;
  transform: translate(-50%, 10px);
  padding: 0.35rem 0.75rem;
  background: color-mix(in srgb, var(--md-sys-color-surface-container-high) 95%, transparent);
  border-radius: 999px;
  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.18);
  font-size: 0.75rem;
  color: var(--app-secondary-text-color);
  pointer-events: none;
  opacity: 0;
  transition: opacity 180ms ease, transform 180ms ease;
  z-index: 3;
}

.screenshot-carousel__hint[data-state='visible'] {
  opacity: 1;
  transform: translate(-50%, 0);
}

.screenshot-carousel__hint[data-state='hidden'] {
  opacity: 0;
  transform: translate(-50%, 6px);
}
