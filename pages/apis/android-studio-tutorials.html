<div id="androidWorkspace" class="page-section active">
  <header class="page-header">
    <h1>Android Studio Tutorials API workspace</h1>
    <p>
      Create home feed listings and lesson content with the same workflow as the
      App Toolkit builder. Track metadata quality, compare diffs, and publish
      updates without leaving the workspace.
    </p>
  </header>

  <section class="workspace-dashboard" aria-label="Workspace overview">
    <div class="workspace-insight-grid">
      <md-elevated-card class="insight-card">
        <div class="insight-card-header">
          <span class="material-symbols-outlined insight-icon">view_list</span>
          <span class="insight-label">Home lessons tracked</span>
        </div>
        <p class="insight-value" id="androidHomeCardCount">0</p>
        <p class="insight-helper">Live count mirrors the JSON preview.</p>
      </md-elevated-card>
      <md-elevated-card class="insight-card">
        <div class="insight-card-header">
          <span class="material-symbols-outlined insight-icon">assignment_turned_in</span>
          <span class="insight-label">Release ready</span>
        </div>
        <p class="insight-value" id="androidReleaseReadyCount">0</p>
        <p class="insight-helper">Entries with required metadata completed.</p>
      </md-elevated-card>
      <md-elevated-card class="insight-card">
        <div class="insight-card-header">
          <span class="material-symbols-outlined insight-icon">extension</span>
          <span class="insight-label">Blocks per lesson</span>
        </div>
        <p class="insight-value" id="androidLessonBlockAverage">0</p>
        <p class="insight-helper">Average content blocks in the active lesson.</p>
      </md-elevated-card>
    </div>

    <div class="workspace-secondary-grid">
      <md-filled-card class="workspace-plan">
        <div class="card-body">
          <div class="plan-header">
            <h2>Today's pipeline</h2>
            <span class="plan-updated"
              >Updated <span id="androidLastEdited">awaiting changes</span></span
            >
          </div>
          <ol class="plan-list">
            <li>
              <span class="plan-step-title">Curate home feed metadata</span>
              <span class="plan-step-meta" id="androidReviewCount"
                >0 lessons needing attention</span
              >
            </li>
            <li>
              <span class="plan-step-title">Validate lesson structure</span>
              <span class="plan-step-meta"
                >Ensure code, assets, and copy are balanced.</span
              >
            </li>
            <li>
              <span class="plan-step-title">Publish to GitHub</span>
              <span class="plan-step-meta"
                >Ship debug and release payloads together.</span
              >
            </li>
          </ol>
          <div class="plan-actions">
            <md-filled-tonal-button id="androidFocusButton" has-icon>
              <md-icon slot="icon"
                ><span class="material-symbols-outlined">timelapse</span></md-icon
              >
              Start focus session
            </md-filled-tonal-button>
            <md-text-button id="androidNotesButton" has-icon>
              <md-icon slot="icon"
                ><span class="material-symbols-outlined">edit_note</span></md-icon
              >
              Capture notes
              <span class="note-indicator" aria-hidden="true">●</span>
            </md-text-button>
          </div>
        </div>
      </md-filled-card>

      <md-filled-card class="workspace-release">
        <div class="card-body">
          <div class="release-header">
            <h2>Release readiness</h2>
            <p id="androidWorkspacePulse">Review entries to unlock insights.</p>
          </div>
          <div
            class="release-progress"
            role="img"
            aria-label="Release readiness progress"
          >
            <div class="release-progress-track">
              <div
                class="release-progress-bar"
                id="androidReleaseProgress"
              ></div>
            </div>
            <div class="release-progress-legend">
              <span>Home</span>
              <span>Lesson</span>
            </div>
          </div>
          <ul class="release-tips">
            <li>
              Populate lesson_id, lesson_type, and hero imagery for each home
              card.
            </li>
            <li>
              Include at least four content blocks per lesson, mixing copy,
              images, and code.
            </li>
          </ul>
        </div>
      </md-filled-card>
    </div>
  </section>

  <md-filled-card class="guidance-card">
    <div class="card-body">
      <h2>Before you start</h2>
      <ul>
        <li>
          Home cards should include <strong>lesson_id</strong>,
          <strong>lesson_type</strong>, <strong>lesson_title</strong>, and deep
          links for navigation.
        </li>
        <li>
          Lessons can mix headers, rich text, media, and ad placements. Use code
          blocks for Kotlin/Java snippets.
        </li>
        <li>
          Replace JSON files in
          <code>Android Studio Tutorials/[debug|release]/en</code> when you
          export.
        </li>
        <li>
          Fetch the latest payloads before editing to compare them in the diff
          sheet.
        </li>
      </ul>
    </div>
  </md-filled-card>

  <md-filled-card class="builder-remote-card" id="androidRemoteImport">
    <div class="card-body">
      <div class="builder-remote-header">
        <div>
          <h2>Fetch existing JSON</h2>
          <p>Pull the latest home or lesson payload before editing entries.</p>
        </div>
        <md-segmented-button-set
          id="androidFetchTarget"
          aria-label="Payload to fetch"
        >
          <md-segmented-button value="home" selected>Home</md-segmented-button>
          <md-segmented-button value="lesson">Lesson</md-segmented-button>
        </md-segmented-button-set>
      </div>
      <div class="builder-remote-controls">
        <md-outlined-text-field
          id="androidFetchInput"
          type="url"
          label="JSON URL"
          placeholder="https://example.com/android_home.json"
          supporting-text="Paste a direct link to the current payload"
          spellcheck="false"
        >
          <md-icon slot="leading-icon"
            ><span class="material-symbols-outlined">link</span></md-icon
          >
        </md-outlined-text-field>
        <md-filled-tonal-button id="androidFetchButton" has-icon>
          <md-icon slot="icon"
            ><span class="material-symbols-outlined">cloud_download</span></md-icon
          >
          Fetch from URL
        </md-filled-tonal-button>
      </div>
      <div class="builder-remote-presets" aria-label="Quick fetch shortcuts">
        <span class="builder-remote-presets-label">Quick links</span>
        <md-text-button
          has-icon
          data-android-fetch-target="home"
          data-android-fetch-preset="https://raw.githubusercontent.com/MihaiCristianCondrea/com.d4rk.apis/refs/heads/main/Android%20Studio%20Tutorials/debug/en/home/api_get_lessons.json"
        >
          <md-icon slot="icon"
            ><span class="material-symbols-outlined">download</span></md-icon
          >
          Home · Debug
        </md-text-button>
        <md-text-button
          has-icon
          data-android-fetch-target="home"
          data-android-fetch-preset="https://raw.githubusercontent.com/MihaiCristianCondrea/com.d4rk.apis/refs/heads/main/Android%20Studio%20Tutorials/release/en/home/api_get_lessons.json"
        >
          <md-icon slot="icon"
            ><span class="material-symbols-outlined">download</span></md-icon
          >
          Home · Release
        </md-text-button>
        <md-text-button
          has-icon
          data-android-fetch-target="lesson"
          data-android-fetch-preset="https://raw.githubusercontent.com/MihaiCristianCondrea/com.d4rk.apis/refs/heads/main/Android%20Studio%20Tutorials/debug/en/lessons/api_get_compose_scaffold.json"
        >
          <md-icon slot="icon"
            ><span class="material-symbols-outlined">download</span></md-icon
          >
          Lesson · Debug
        </md-text-button>
        <md-text-button
          has-icon
          data-android-fetch-target="lesson"
          data-android-fetch-preset="https://raw.githubusercontent.com/MihaiCristianCondrea/com.d4rk.apis/refs/heads/main/Android%20Studio%20Tutorials/release/en/lessons/api_get_constraint_layout.json"
        >
          <md-icon slot="icon"
            ><span class="material-symbols-outlined">download</span></md-icon
          >
          Lesson · Release
        </md-text-button>
      </div>
    </div>
  </md-filled-card>

  <md-filled-card class="builder-remote-card" id="androidGithubCard">
    <div class="card-body">
      <div class="builder-remote-header">
        <div>
          <h2>Publish to GitHub</h2>
          <p>
            Use the GitHub Contents API to update payloads once the previews are
            valid. Tokens are used only for this request and never stored.
          </p>
        </div>
      </div>
      <div class="builder-github-note" role="note">
        <p>
          <strong>Create a personal access token</strong> with
          <em>Repository permissions → Contents: Read &amp; write</em>. Keep the
          token outside of source control and scope it to this repository.
        </p>
      </div>
      <div class="builder-github-launch">
        <md-filled-button id="androidGithubWizardButton" has-icon>
          <md-icon slot="icon"
            ><span class="material-symbols-outlined">rocket_launch</span></md-icon
          >
          Open publish wizard
        </md-filled-button>
        <p class="builder-github-helper">
          Validate the previews first, then follow the guided steps to publish.
        </p>
      </div>
    </div>
  </md-filled-card>

  <div class="pager" id="androidPager" data-pager>
    <div class="pager-tabs" role="tablist">
      <button
        type="button"
        class="pager-tab active"
        data-page="home"
        role="tab"
        aria-selected="true"
      >
        Home API
      </button>
      <button
        type="button"
        class="pager-tab"
        data-page="lesson"
        role="tab"
        aria-selected="false"
      >
        Lesson API
      </button>
    </div>
    <div class="pager-pages">
      <section class="pager-page active" data-page="home" role="tabpanel">
        <md-filled-card class="guidance-card">
          <div class="card-body">
            <h2>Home feed cards</h2>
            <ul>
              <li>
                Lesson cards use <strong>lesson_type</strong> values like
                <code>full_banner</code> or <code>square_image</code> and require
                title, description, and deep link.
              </li>
              <li>
                Ads and promotional slots are represented by
                <strong>lesson_id</strong> constants such as
                <code>ad_view_banner_large</code>.
              </li>
            </ul>
          </div>
        </md-filled-card>

        <section
          class="api-builder"
          id="androidHomeBuilder"
          data-builder-type="android-home"
        >
          <div class="builder-toolbar">
            <div class="builder-toolbar-actions">
              <md-filled-button id="androidHomeAddCard" has-icon>
                <md-icon slot="icon"
                  ><span class="material-symbols-outlined">add</span></md-icon
                >
                Add card
              </md-filled-button>
              <md-outlined-button id="androidHomeImportButton" has-icon>
                <md-icon slot="icon"
                  ><span class="material-symbols-outlined">upload</span></md-icon
                >
                Import JSON
              </md-outlined-button>
              <input
                type="file"
                id="androidHomeImportInput"
                accept="application/json"
                hidden
              />
              <md-text-button id="androidHomeResetButton" has-icon>
                <md-icon slot="icon"
                  ><span class="material-symbols-outlined">refresh</span></md-icon
                >
                Clear cards
              </md-text-button>
            </div>
            <div class="builder-toolbar-meta">
              <div class="toolbar-status" role="status" aria-live="polite">
                <span class="toolbar-status-label">Home status</span>
                <span
                  class="toolbar-status-value"
                  id="androidHomeToolbarPulse"
                  >Awaiting input</span
                >
              </div>
            </div>
          </div>

          <div class="builder-layout builder-columns">
            <div
              class="builder-forms"
              id="androidHomeEntries"
              aria-live="polite"
            ></div>
            <aside class="builder-preview" aria-label="JSON preview">
              <div class="preview-header">
                <h2>Preview &amp; export</h2>
                <p>Validate your payload before updating the repo.</p>
              </div>
              <textarea
                id="androidHomePreview"
                class="preview-textarea"
                readonly
                spellcheck="false"
                aria-label="Android Studio Tutorials home JSON preview"
              ></textarea>
              <div
                class="preview-validation"
                id="androidHomeValidation"
                role="status"
                aria-live="polite"
              ></div>
              <div class="preview-actions">
                <md-filled-tonal-button id="androidHomeCopyButton" has-icon>
                  <md-icon slot="icon"
                    ><span class="material-symbols-outlined"
                      >content_copy</span
                    ></md-icon
                  >
                  Copy JSON
                </md-filled-tonal-button>
                <md-outlined-button
                  id="androidHomeDownloadButton"
                  has-icon
                  trailing-icon
                >
                  Download
                  <md-icon slot="icon"
                    ><span class="material-symbols-outlined"
                      >download</span
                    ></md-icon
                  >
                </md-outlined-button>
              </div>
            </aside>
          </div>
        </section>
      </section>

      <section class="pager-page" data-page="lesson" role="tabpanel">
        <md-filled-card class="guidance-card">
          <div class="card-body">
            <h2>Lesson content blocks</h2>
            <ul>
              <li>
                Add headers, text, code snippets, ads, and imagery to build a
                linear learning experience.
              </li>
              <li>
                Code blocks support Kotlin, Java, and XML languages; remember to
                paste escaped HTML when needed.
              </li>
            </ul>
          </div>
        </md-filled-card>

        <section
          class="api-builder"
          id="androidLessonBuilder"
          data-builder-type="android-lesson"
        >
          <div class="builder-toolbar">
            <md-outlined-text-field
              id="androidLessonTitle"
              label="Lesson title"
              placeholder="Displaying transient messages with Snackbars"
              supporting-text="Shown in the lesson header"
              class="lesson-title-field"
            ></md-outlined-text-field>
            <div class="toolbar-actions">
              <md-filled-button id="androidLessonAddBlock" has-icon>
                <md-icon slot="icon"
                  ><span class="material-symbols-outlined">add</span></md-icon
                >
                Add block
              </md-filled-button>
              <md-outlined-button id="androidLessonImportButton" has-icon>
                <md-icon slot="icon"
                  ><span class="material-symbols-outlined">upload</span></md-icon
                >
                Import JSON
              </md-outlined-button>
              <input
                type="file"
                id="androidLessonImportInput"
                accept="application/json"
                hidden
              />
              <md-text-button id="androidLessonResetButton" has-icon>
                <md-icon slot="icon"
                  ><span class="material-symbols-outlined"
                    >refresh</span
                  ></md-icon
                >
                Clear blocks
              </md-text-button>
            </div>
            <div class="builder-toolbar-meta">
              <div class="toolbar-status" role="status" aria-live="polite">
                <span class="toolbar-status-label">Lesson status</span>
                <span
                  class="toolbar-status-value"
                  id="androidLessonToolbarPulse"
                  >Awaiting input</span
                >
              </div>
            </div>
          </div>

          <div class="builder-layout builder-columns">
            <div class="builder-forms">
              <div
                class="builder-field-collection"
                id="androidLessonMetadata"
              ></div>
              <div
                class="builder-field-collection"
                id="androidLessonBlocks"
                aria-live="polite"
              ></div>
            </div>
            <aside class="builder-preview" aria-label="JSON preview">
              <div class="preview-header">
                <h2>Preview &amp; export</h2>
                <p>Preview updates before committing the JSON file.</p>
              </div>
              <textarea
                id="androidLessonPreview"
                class="preview-textarea"
                readonly
                spellcheck="false"
                aria-label="Android Studio Tutorials lesson JSON preview"
              ></textarea>
              <div
                class="preview-validation"
                id="androidLessonValidation"
                role="status"
                aria-live="polite"
              ></div>
              <div class="preview-actions">
                <md-filled-tonal-button id="androidLessonCopyButton" has-icon>
                  <md-icon slot="icon"
                    ><span class="material-symbols-outlined"
                      >content_copy</span
                    ></md-icon
                  >
                  Copy JSON
                </md-filled-tonal-button>
                <md-outlined-button
                  id="androidLessonDownloadButton"
                  has-icon
                  trailing-icon
                >
                  Download
                  <md-icon slot="icon"
                    ><span class="material-symbols-outlined"
                      >download</span
                    ></md-icon
                  >
                </md-outlined-button>
              </div>
            </aside>
          </div>
        </section>
      </section>
    </div>
  </div>

  <md-side-sheet
    id="androidDiffSheet"
    class="builder-diff-sheet"
    aria-label="Workspace diff"
  >
    <div slot="headline">Workspace diff</div>
    <div slot="supporting-text">
      Compare the current workspace against the last fetched payloads.
    </div>
    <div slot="content" class="diff-sheet-content">
      <div
        id="androidDiffContent"
        class="diff-view diff-view--empty"
        role="status"
        aria-live="polite"
      ></div>
    </div>
  </md-side-sheet>

  <md-dialog id="androidFocusDialog" class="app-dialog focus-dialog">
    <div slot="headline">Focus session</div>
    <div slot="content" class="focus-dialog-content">
      <div class="focus-dialog-timer" id="androidFocusTimer" aria-live="polite">
        25:00
      </div>
      <div class="focus-dialog-controls">
        <md-filled-tonal-button id="androidFocusStart" data-dialog-initial-focus>
          Start
        </md-filled-tonal-button>
        <md-filled-tonal-button id="androidFocusPause">Pause</md-filled-tonal-button>
        <md-text-button id="androidFocusReset">Reset</md-text-button>
      </div>
      <div class="focus-dialog-checklist">
        <h3>Pending checklist</h3>
        <md-list id="androidFocusChecklist" class="focus-checklist"></md-list>
      </div>
      <md-filled-text-field
        id="androidFocusNotes"
        label="Session notes"
        supporting-text="Notes are saved locally for this browser session."
        rows="4"
        multiline
      ></md-filled-text-field>
    </div>
    <div slot="actions">
      <md-text-button dialog-action="close">Close</md-text-button>
      <md-filled-button id="androidFocusSave">Save note</md-filled-button>
    </div>
  </md-dialog>

  <md-dialog id="androidGithubDialog" class="app-dialog github-dialog">
    <div slot="headline">Publish to GitHub</div>
    <div slot="content" class="github-dialog-content">
      <md-steppers id="androidGithubStepper" value="authenticate">
        <md-step value="authenticate" label="Authenticate">
          <div class="github-step" data-step="authenticate">
            <md-filled-text-field
              id="androidGithubToken"
              label="Personal access token"
              type="password"
              autocomplete="off"
              spellcheck="false"
              supporting-text="Tokens require Contents: Read &amp; write access."
            ></md-filled-text-field>
          </div>
        </md-step>
        <md-step value="target" label="Target">
          <div class="github-step" data-step="target">
            <md-filled-text-field
              id="androidGithubRepo"
              label="Repository (owner/name)"
              value="MihaiCristianCondrea/com.d4rk.apis"
              supporting-text="Use owner/name format."
              spellcheck="false"
            ></md-filled-text-field>
            <md-filled-text-field
              id="androidGithubBranch"
              label="Branch"
              value="main"
              spellcheck="false"
            ></md-filled-text-field>
            <md-filled-text-field
              id="androidGithubMessage"
              label="Commit message"
              value="chore(android-studio-tutorials): update payloads"
              spellcheck="false"
            ></md-filled-text-field>
            <md-outlined-select
              id="androidGithubTarget"
              label="Payload target"
              value="home-debug"
            >
              <md-select-option value="home-debug">Home · Debug</md-select-option>
              <md-select-option value="home-release">Home · Release</md-select-option>
              <md-select-option value="lesson-debug">Lesson · Debug</md-select-option>
              <md-select-option value="lesson-release">Lesson · Release</md-select-option>
            </md-outlined-select>
            <md-filled-text-field
              id="androidGithubLessonSlug"
              label="Lesson slug (for lesson targets)"
              placeholder="compose_scaffold"
              supporting-text="Used to build api_get_{slug}.json file names."
              spellcheck="false"
            ></md-filled-text-field>
          </div>
        </md-step>
        <md-step value="review" label="Review">
          <div class="github-step" data-step="review">
            <p class="github-review-copy">
              Confirm the diff in the side sheet and publish when ready.
            </p>
            <div
              class="github-status"
              id="androidGithubStatus"
              role="status"
              aria-live="polite"
            ></div>
          </div>
        </md-step>
      </md-steppers>
    </div>
    <div slot="actions" class="github-dialog-actions">
      <md-text-button dialog-action="close">Cancel</md-text-button>
      <md-text-button id="androidGithubBack">Back</md-text-button>
      <md-filled-button id="androidGithubNext" data-dialog-initial-focus>Next</md-filled-button>
    </div>
  </md-dialog>
</div>
