<div class="gh-tools-page">
  <section class="gh-tools-section">
    <header class="gh-tools-header">
      <p class="gh-eyebrow">GitHub Tools</p>
      <h1>Release Stats</h1>
      <p class="gh-subtext">Analyze downloads and assets for repository releases.</p>
    </header>
    <div class="gh-card">
      <form id="releases-form" class="gh-form" autocomplete="off" name="releases-form">
        <div class="gh-field-row">
          <md-outlined-text-field
            id="releases-url"
            name="releases-url"
            type="url"
            class="gh-md-field"
            label="Repository URL"
            autocomplete="off"
            aria-describedby="releases-url-helper releases-url-error"
            spellcheck="false"
            required
          >
            <md-icon-button
              id="releases-fav-btn"
              slot="trailing-icon"
              aria-pressed="false"
              aria-label="Favorite repository"
              toggle=""
              variant="outlined"
            >
              <!-- Change Rationale: md-icon-button surfaces its default and `selected` slots,
                   so defining both ensures the outlined star is always visible while the
                   filled version appears immediately when selected. The outlined variant
                   keeps the border visible at rest and matches the Repo Mapper inspiration
                   styling. -->
              <md-icon>star</md-icon>
              <md-icon slot="selected" class="filled-icon">star</md-icon>
            </md-icon-button>
          </md-outlined-text-field>
        </div>
        <p id="releases-url-helper" class="gh-helper-text">Use a GitHub URL, owner/repo slug, or compact OwnerRepo name with a dot.</p>
        <p id="releases-url-error" class="gh-error-text" hidden="">Invalid repository URL.</p>
        <div class="gh-token-settings" id="releases-token-settings">
          <md-filled-tonal-button class="token-toggle" id="releases-token-reveal" aria-expanded="false" type="button">
            <md-icon slot="icon">vpn_key</md-icon>
            <span class="favorite-label">Token settings</span>
            <md-icon slot="trailing-icon">expand_more</md-icon>
          </md-filled-tonal-button>
          <div class="gh-collapsible" id="releases-token-wrapper" hidden>
            <md-outlined-text-field id="releases-token" type="password" class="gh-floating-input" label="Personal Access Token (optional)" autocomplete="off" aria-describedby="releases-token-helper releases-token-error" spellcheck="false"></md-outlined-text-field>
            <p id="releases-token-helper" class="gh-helper-text">Include when querying private repositories.</p>
            <p id="releases-token-error" class="gh-error-text" hidden="">Token required for private repos.</p>
            <div class="gh-token-visibility">
              <md-checkbox id="releases-token-toggle">
                <span slot="label" data-token-visibility-label>Show token</span>
              </md-checkbox>
            </div>
          </div>
        </div>
        <div class="gh-actions end">
          <button type="submit" id="releases-submit" class="gh-primary-button">
            <span class="material-symbols-outlined">analytics</span>
            <span>Analyze</span>
          </button>
        </div>
      </form>
    </div>
    <div id="releases-error" class="gh-error" hidden="">
      <span class="material-symbols-outlined">error</span>
      <span data-error-text="">Unable to analyze releases.</span>
    </div>
    <div id="releases-result" class="gh-result" hidden="">
      <div class="gh-result-bar">
        <div class="gh-badge-group">
          <span class="gh-stat-pill"><span id="rel-total-downloads-pill">0</span> Downloads</span>
          <span class="gh-stat-pill"><span id="rel-count">0</span> Releases</span>
        </div>
        <div class="gh-action-row">
          <button type="button" id="rel-copy-json" class="gh-ghost-button">
            <span class="material-symbols-outlined">content_copy</span>
            <span>Copy JSON</span>
          </button>
          <button type="button" id="rel-download-json" class="gh-ghost-button">
            <span class="material-symbols-outlined">save</span>
            <span>Download JSON</span>
          </button>
          <button type="button" id="rel-copy-csv" class="gh-ghost-button">
            <span class="material-symbols-outlined">table</span>
            <span>Copy CSV</span>
          </button>
          <button type="button" id="rel-download-csv" class="gh-ghost-button">
            <span class="material-symbols-outlined">download</span>
            <span>Download CSV</span>
          </button>
        </div>
      </div>
      <div class="gh-result-grid">
        <div class="gh-result-card">
          <div class="gh-result-heading">
            <p class="gh-subtext">Selected release</p>
            <h3 id="rel-detail-name" class="gh-title">â€”</h3>
            <div class="gh-badge-row">
              <span id="rel-detail-tag" class="gh-badge">tag</span>
              <span id="rel-detail-date" class="gh-badge">date</span>
            </div>
          </div>
          <div class="gh-stat-block">
            <span class="gh-subtext">Downloads</span>
            <span id="rel-detail-downloads" class="gh-stat-value">0</span>
          </div>
          <div class="gh-stack">
            <p class="gh-subtext">Assets</p>
            <div id="rel-assets-list" class="gh-assets"></div>
          </div>
        </div>
        <div class="gh-result-card">
          <div class="gh-overview">
            <div>
              <p class="gh-subtext">Total project downloads</p>
              <h3 id="rel-total-downloads" class="gh-title">0</h3>
            </div>
          </div>
          <div class="gh-overview-list">
            <div class="gh-overview-header">
              <p class="gh-subtext">All releases</p>
              <p class="gh-subtext">Pick a tag to see asset breakdowns</p>
            </div>
            <div id="rel-list" class="gh-release-list"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<datalist id="releases-datalist"></datalist>
