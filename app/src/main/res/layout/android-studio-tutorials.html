<div id="androidWorkspace" class="page-section app-shell-panel active">
  <header class="page-header">
    <h1>Android Studio Tutorials API workspace</h1>
    <p>Create home feed listings and lesson content with the same workflow as the App Toolkit builder. Track metadata quality, compare diffs, and publish updates without leaving the workspace.</p>
  </header>
  <!-- Change Rationale: The workspace dashboard now uses a shared partial to keep metrics, pipeline copy, and release tips
       consistent across workspaces while allowing IDs and helper text to stay configurable. -->
  <section
    class="workspace-dashboard"
    data-slot="workspace-dashboard"
    data-home-icon="view_list"
    data-home-label="Home lessons tracked"
    data-home-helper="Live count mirrors the JSON preview."
    data-home-count-id="androidHomeCardCount"
    data-release-icon="assignment_turned_in"
    data-release-label="Release ready"
    data-release-helper="Entries with required metadata completed."
    data-release-ready-id="androidReleaseReadyCount"
    data-blocks-icon="extension"
    data-blocks-label="Blocks per lesson"
    data-blocks-helper="Average content blocks in the active lesson."
    data-blocks-count-id="androidLessonBlockAverage"
    data-last-edited-id="androidLastEdited"
    data-last-edited-default="awaiting changes"
    data-pulse-id="androidWorkspacePulse"
    data-pulse-default-text="Review entries to unlock insights."
    data-progress-id="androidReleaseProgress"
    data-legend-primary-text="Home"
    data-legend-secondary-text="Lesson"
  >
    <template slot="plan-steps">
      <li><span class="plan-step-title">Curate home feed metadata</span> <span class="plan-step-meta" id="androidReviewCount">0 lessons needing attention</span></li>
      <li><span class="plan-step-title">Validate lesson structure</span> <span class="plan-step-meta">Ensure code, assets, and copy are balanced.</span></li>
      <li><span class="plan-step-title">Publish to GitHub</span> <span class="plan-step-meta">Ship debug and release payloads together.</span></li>
    </template>
    <template slot="release-tips">
      <li>Populate lesson_id, lesson_type, and hero imagery for each home card.</li>
      <li>Include at least four content blocks per lesson, mixing copy, images, and code.</li>
    </template>
  </section>
  <div class="card-body">
    <h2>Before you start</h2>
    <ul>
      <li>Home cards should include <strong>lesson_id</strong>, <strong>lesson_type</strong>, <strong>lesson_title</strong>, and deep links for navigation.</li>
      <li>Lessons can mix headers, rich text, media, and ad placements. Use code blocks for Kotlin/Java snippets.</li>
      <li>Publish payloads to <code>api/android_studio_tutorials/v1/[debug|release]/en</code> when you export updates.</li>
      <li>Fetch the latest payloads before editing to compare them in the diff sheet.</li>
    </ul>
  </div>
  <div class="card-body">
    <div class="builder-remote-header">
      <div>
        <h2>Fetch existing JSON</h2>
        <p>Pull the latest home or lesson payload before editing entries.</p>
      </div>Home Lesson
    </div>
    <div class="builder-remote-controls">
      <span class="material-symbols-outlined">link</span> <span class="material-symbols-outlined">cloud_download</span> Fetch from URL
    </div>
    <div class="builder-remote-presets" aria-label="Quick fetch shortcuts">
      <span class="builder-remote-presets-label">Quick links</span> <span class="material-symbols-outlined">download</span> Home · Debug <span class="material-symbols-outlined">download</span> Home · Release <span class="material-symbols-outlined">download</span> Lesson · Debug <span class="material-symbols-outlined">download</span> Lesson · Release
    </div>
  </div>
  <div class="card-body">
    <div class="builder-remote-header">
      <div>
        <h2>Publish to GitHub</h2>
        <p>Use the GitHub Contents API to update payloads once the previews are valid. Tokens are used only for this request and never stored.</p>
      </div>
    </div>
    <div class="builder-github-note" role="note">
      <p><strong>Create a personal access token</strong> with <em>Repository permissions → Contents: Read & write</em>. Keep the token outside of source control and scope it to this repository.</p>
    </div>
    <div class="builder-github-launch">
      <span class="material-symbols-outlined">rocket_launch</span> Open publish wizard
      <p class="builder-github-helper">Validate the previews first, then follow the guided steps to publish.</p>
    </div>
  </div>
  <div class="pager" id="androidPager" data-pager="">
    <div class="pager-tabs" role="tablist">
      <button type="button" class="pager-tab active" data-page="home" role="tab" aria-selected="true">Home API</button> <button type="button" class="pager-tab" data-page="lesson" role="tab" aria-selected="false">Lesson API</button>
    </div>
    <div class="pager-pages">
      <section class="pager-page active" data-page="home" role="tabpanel">
        <div class="card-body">
          <h2>Home feed cards</h2>
          <ul>
            <li>Lesson cards use <strong>lesson_type</strong> values like <code>full_banner</code> or <code>square_image</code> and require title, description, and deep link.</li>
            <li>Ads and promotional slots are represented by <strong>lesson_id</strong> constants such as <code>ad_view_banner_large</code>.</li>
          </ul>
        </div>
        <section class="api-builder" id="androidHomeBuilder" data-builder-type="android-home">
          <div class="builder-toolbar">
            <div class="builder-toolbar-actions">
              <span class="material-symbols-outlined">add</span> Add card <span class="material-symbols-outlined">upload</span> Import JSON <input type="file" id="androidHomeImportInput" accept="application/json" hidden=""> <span class="material-symbols-outlined">refresh</span> Clear cards
            </div>
            <div class="builder-toolbar-meta">
              <div class="toolbar-status" role="status" aria-live="polite">
                <span class="toolbar-status-label">Home status</span> <span class="toolbar-status-value" id="androidHomeToolbarPulse">Awaiting input</span>
              </div>
            </div>
          </div>
          <div class="builder-layout builder-columns">
            <div class="builder-forms" id="androidHomeEntries" aria-live="polite"></div>
            <aside class="builder-preview" aria-label="JSON preview">
              <div class="preview-header">
                <h2>Preview & export</h2>
                <p>Validate your payload before updating the repo.</p>
              </div>
              <textarea id="androidHomePreview" class="preview-textarea" readonly spellcheck="false" aria-label="Android Studio Tutorials home JSON preview"></textarea>
              <div class="preview-validation" id="androidHomeValidation" role="status" aria-live="polite"></div>
              <div class="preview-actions">
                <span class="material-symbols-outlined">content_copy</span> Copy JSON Download <span class="material-symbols-outlined">download</span>
              </div>
            </aside>
          </div>
        </section>
      </section>
      <section class="pager-page" data-page="lesson" role="tabpanel">
        <div class="card-body">
          <h2>Lesson content blocks</h2>
          <ul>
            <li>Add headers, text, code snippets, ads, and imagery to build a linear learning experience.</li>
            <li>Code blocks support Kotlin, Java, and XML languages; remember to paste escaped HTML when needed.</li>
          </ul>
        </div>
        <section class="api-builder" id="androidLessonBuilder" data-builder-type="android-lesson">
          <div class="builder-toolbar">
            <div class="toolbar-actions">
              <span class="material-symbols-outlined">add</span> Add block <span class="material-symbols-outlined">upload</span> Import JSON <input type="file" id="androidLessonImportInput" accept="application/json" hidden=""> <span class="material-symbols-outlined">refresh</span> Clear blocks
            </div>
            <div class="builder-toolbar-meta">
              <div class="toolbar-status" role="status" aria-live="polite">
                <span class="toolbar-status-label">Lesson status</span> <span class="toolbar-status-value" id="androidLessonToolbarPulse">Awaiting input</span>
              </div>
            </div>
          </div>
          <div class="builder-layout builder-columns">
            <div class="builder-forms">
              <div class="builder-field-collection" id="androidLessonMetadata"></div>
              <div class="builder-field-collection" id="androidLessonBlocks" aria-live="polite"></div>
            </div>
            <aside class="builder-preview" aria-label="JSON preview">
              <div class="preview-header">
                <h2>Preview & export</h2>
                <p>Preview updates before committing the JSON file.</p>
              </div>
              <textarea id="androidLessonPreview" class="preview-textarea" readonly spellcheck="false" aria-label="Android Studio Tutorials lesson JSON preview"></textarea>
              <div class="preview-validation" id="androidLessonValidation" role="status" aria-live="polite"></div>
              <div class="preview-actions">
                <span class="material-symbols-outlined">content_copy</span> Copy JSON Download <span class="material-symbols-outlined">download</span>
              </div>
            </aside>
          </div>
        </section>
      </section>
    </div>
  </div>
  <div slot="headline">
    Workspace diff
  </div>
  <div slot="supporting-text">
    Compare the current workspace against the last fetched payloads.
  </div>
  <div slot="content" class="diff-sheet-content">
    <div id="androidDiffContent" class="diff-view diff-view--empty" role="status" aria-live="polite"></div>
  </div>
  <div slot="headline">
    Focus session
  </div>
  <div slot="content" class="focus-dialog-content">
    <div class="focus-dialog-timer" id="androidFocusTimer" aria-live="polite">
      25:00
    </div>
    <div class="focus-dialog-controls">
      Start Pause Reset
    </div>
    <div class="focus-dialog-checklist">
      <h3>Pending checklist</h3>
    </div>
  </div>
  <div slot="actions">
    Close Save note
  </div>
  <div slot="headline">
    Publish to GitHub
  </div>
  <div slot="content" class="github-dialog-content">
    <div class="github-step" data-step="authenticate"></div>
    <div class="github-step" data-step="target">
      Home · Debug Home · Release Lesson · Debug Lesson · Release
    </div>
    <div class="github-step" data-step="review">
      <p class="github-review-copy">Confirm the diff in the side sheet and publish when ready.</p>
      <div class="github-status" id="androidGithubStatus" role="status" aria-live="polite"></div>
    </div>
  </div>
  <div slot="actions" class="github-dialog-actions">
    Cancel Back Next
  </div>
</div>