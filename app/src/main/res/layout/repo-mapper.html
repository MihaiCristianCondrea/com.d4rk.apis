<div class="gh-tools-page">
  <section class="gh-tools-section">
    <header class="gh-tools-header">
      <p class="gh-eyebrow">GitHub Tools</p>
      <h1>Repo Mapper</h1>
      <p class="gh-subtext">Generate ASCII directory trees or path lists for any repository.</p>
    </header>
    <div class="gh-card">
      <form id="mapper-form" class="gh-form" autocomplete="off" name="mapper-form">
        <div class="gh-field-row">
          <md-outlined-text-field
            id="mapper-url"
            name="mapper-url"
            type="text"
            class="gh-md-field"
            label="Repository URL"
            autocomplete="off"
            aria-describedby="mapper-url-helper mapper-url-error"
            list="mapper-datalist"
            inputmode="url"
            required
          >
            <md-icon-button
              id="mapper-fav-btn"
              slot="trailing-icon"
              aria-pressed="false"
              aria-label="Favorite repository"
              toggle=""
              variant="outlined"
            >
              <!-- Change Rationale: Material's outlined variant keeps the star framed whether
                   the control is idle or selected, and supplying both the default and
                   `selected` slots preserves the outlined-to-filled transition without
                   collapsing the icon when toggled. The previous `type="url"` enforcement
                   blocked compact owner/repo slugs (e.g., MihaiCristianCondrea/App-Toolkit-for-Android)
                   with native "Please enter a URL" errors; switching to `type="text"` with
                   `inputmode="url"` keeps keyboard hints while allowing slug inputs that the
                   mapper already normalizes. -->
              <md-icon>star</md-icon>
              <md-icon slot="selected" class="filled-icon">star</md-icon>
            </md-icon-button>
          </md-outlined-text-field>
        </div>
        <p id="mapper-url-helper" class="gh-helper-text">Paste a GitHub repository URL, owner/repo slug, or compact OwnerRepo name with a dot.</p>
        <p id="mapper-url-error" class="gh-error-text" hidden="">Enter a GitHub URL or owner/repo slug.</p>
        <div class="gh-control-row">
          <div class="gh-token-settings" id="mapper-token-settings">
            <md-filled-tonal-button class="token-toggle" id="mapper-token-reveal" aria-expanded="false" type="button">
              <md-icon slot="icon">vpn_key</md-icon>
              <span class="favorite-label">Token settings</span>
              <md-icon slot="trailing-icon">expand_more</md-icon>
            </md-filled-tonal-button>
            <div class="gh-collapsible" id="mapper-token-wrapper" hidden>
              <md-outlined-text-field id="mapper-token" name="mapper-token" type="password" label="Personal Access Token (optional)" autocomplete="off" aria-describedby="mapper-token-helper mapper-token-error" spellcheck="false"></md-outlined-text-field>
              <p id="mapper-token-helper" class="gh-helper-text">Use when working with private repositories.</p>
              <p id="mapper-token-error" class="gh-error-text" hidden="">Token required for private repos.</p>
              <div class="gh-token-visibility">
                <md-checkbox id="mapper-token-toggle">
                  <span slot="label" data-token-visibility-label>Show token</span>
                </md-checkbox>
              </div>
            </div>
          </div>
          <div class="gh-segmented-wrapper">
            <md-segmented-button-set
              aria-label="Select mapper output format"
              id="mapper-format"
              class="app-segmented segmented-inline"
            >
              <md-outlined-segmented-button id="btn-format-ascii" value="ascii" selected>
                <md-icon slot="icon">terminal</md-icon>
                <span>ASCII</span>
              </md-outlined-segmented-button>
              <md-outlined-segmented-button id="btn-format-paths" value="paths">
                <md-icon slot="icon">view_list</md-icon>
                <span>Paths</span>
              </md-outlined-segmented-button>
            </md-segmented-button-set>
          </div>
        </div>
        <div class="gh-actions end">
          <button type="submit" id="mapper-submit" class="gh-primary-button">
            <span class="material-symbols-outlined">terminal</span>
            <span>Generate Map</span>
          </button>
        </div>
      </form>
    </div>
    <div id="mapper-error" class="gh-error" hidden="">
      <span class="material-symbols-outlined">error</span>
      <span data-error-text="">Unable to process repository.</span>
    </div>
    <div id="mapper-result" class="gh-result" hidden="">
      <div class="gh-result-bar">
        <div class="gh-badge-group">
          <span class="gh-stat-pill"><span id="mapper-stats-folders">0</span> Folders</span>
          <span class="gh-stat-pill"><span id="mapper-stats-files">0</span> Files</span>
        </div>
        <button type="button" id="mapper-copy-btn" class="gh-ghost-button">
          <span class="material-symbols-outlined">content_copy</span>
          <span>Copy Code</span>
        </button>
      </div>
      <div class="gh-output">
        <div class="gh-output-header">
          <span class="material-symbols-outlined">description</span>
          <span>Output</span>
        </div>
        <pre><code id="mapper-code"></code></pre>
      </div>
    </div>
  </section>
</div>
<datalist id="mapper-datalist"></datalist>
