<!-- Change Rationale: GitHub tool pages previously rendered without the shared BeerCSS page wrapper,
     which made their spacing and typography diverge from other routes. Adding the `page-section`,
     `page`, and `app-shell-panel` classes aligns these screens with the BeerCSS page pattern so
     layout rhythm and transitions stay consistent with Material 3 surface guidance. -->
<div class="page-section app-shell-panel page active gh-tools-page">
  <section class="gh-tools-section">
    <header class="gh-tools-header">
      <p class="gh-eyebrow">GitHub Tools</p>
      <h1>Git Patch</h1>
      <p class="gh-subtext">Fetch raw .patch files from commit URLs.</p>
    </header>
    <div class="gh-card">
      <form id="patch-form" class="gh-form" autocomplete="off" name="patch-form">
        <div class="gh-field-row">
          <md-outlined-text-field
            id="patch-url"
            name="patch-url"
            type="url"
            class="gh-md-field"
            label="Commit URL"
            autocomplete="off"
            aria-describedby="patch-url-helper patch-url-error"
            spellcheck="false"
            required
          >
            <md-icon-button
              id="patch-fav-btn"
              slot="trailing-icon"
              aria-pressed="false"
              aria-label="Favorite commit"
              toggle=""
              variant="outlined"
            >
              <!-- Change Rationale: Material's icon button swaps between its default and
                   `selected` slots. Supplying both keeps the outlined star visible on load
                   and switches to the filled star as soon as the control is selected. The
                   outlined variant mirrors the inspiration UI so the star always keeps its
                   border even when unselected. -->
              <md-icon>star</md-icon>
              <md-icon slot="selected" class="filled-icon">star</md-icon>
            </md-icon-button>
          </md-outlined-text-field>
        </div>
        <p id="patch-url-helper" class="gh-helper-text">Accepts full GitHub URLs or shorthand commit paths.</p>
        <p id="patch-url-error" class="gh-error-text" hidden="">Invalid commit URL.</p>
        <div class="gh-token-settings" id="patch-token-settings">
          <md-filled-tonal-button class="token-toggle" id="patch-token-reveal" aria-expanded="false" type="button">
            <md-icon slot="icon">vpn_key</md-icon>
            <span class="favorite-label">Token settings</span>
            <md-icon slot="trailing-icon">expand_more</md-icon>
          </md-filled-tonal-button>
          <div class="gh-collapsible" id="patch-token-wrapper" hidden>
            <div class="gh-floating-field">
              <md-outlined-text-field id="patch-token" type="password" class="gh-floating-input" label="Personal Access Token (optional)" autocomplete="off" aria-describedby="patch-token-helper patch-token-error" spellcheck="false"></md-outlined-text-field>
            </div>
            <p id="patch-token-helper" class="gh-helper-text">Required when fetching private commits.</p>
            <p id="patch-token-error" class="gh-error-text" hidden="">Token required for private repos.</p>
            <div class="gh-token-visibility">
              <md-checkbox id="patch-token-toggle">
                <span slot="label" data-token-visibility-label>Show token</span>
              </md-checkbox>
            </div>
          </div>
        </div>
        <div class="gh-actions end">
          <!-- Change Rationale: Primary actions previously relied on project-specific button classes,
               which left size and shape inconsistent with other screens. Applying BeerCSS button
               helpers (`primary`, `large`, `round`) delegates sizing to the framework, keeping
               touch targets consistent and aligning with Material 3's emphasis on uniform control
               geometry. -->
          <button type="submit" id="patch-submit" class="primary large round">
            <span class="material-symbols-outlined">difference</span>
            <span>Get Patch</span>
          </button>
        </div>
      </form>
    </div>
    <div id="patch-error" class="gh-error" hidden="">
      <span class="material-symbols-outlined">error</span>
      <span data-error-text="">Unable to fetch patch.</span>
    </div>
    <div id="patch-result" class="gh-result" hidden="">
      <div class="gh-result-bar">
        <div class="gh-badge-group">
          <span class="gh-stat-pill"><span class="material-symbols-outlined">check</span> <span>Ready to apply</span></span>
        </div>
        <div class="gh-action-row">
          <!-- Change Rationale: Secondary actions previously used custom ghost classes, which
               produced mismatched outlines and corner radii. Using BeerCSS `border`, `transparent`,
               and size helpers keeps the button shape consistent with the primary action while
               respecting Material 3's outlined control guidance. -->
          <button type="button" id="patch-download-btn" class="small round transparent border">
            <span class="material-symbols-outlined">download</span>
            <span>Download</span>
          </button>
          <button type="button" id="patch-copy-btn" class="small round transparent border">
            <span class="material-symbols-outlined">content_copy</span>
            <span>Copy</span>
          </button>
        </div>
      </div>
      <div class="gh-output">
        <div class="gh-output-header">
          <span class="material-symbols-outlined">integration_instructions</span>
          <span>Patch</span>
        </div>
        <pre><code id="patch-code"></code></pre>
      </div>
    </div>
  </section>
</div>
<datalist id="patch-datalist"></datalist>
